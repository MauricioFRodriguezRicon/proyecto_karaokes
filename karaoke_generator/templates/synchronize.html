<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Sincronizar Canción</title>
</head>
<body>
    <h1>Sincronizar Canción</h1>

    <audio id="audio" controls>
        <source src="{{song}}">
    </audio>

    <div id="lyrics">
        {% for words in lyrics %}
        <div id="sentence">
        <span class="word"> {{words}} </span>
        </div>
        {% endfor %}
    </div>


    <button id="synchronize" onclick="start()">Synchronize</button>

    <script>
        let audio = document.getElementById('audio');
        let palabras = document.querySelectorAll('.word');
        let tiempos = [];
        let indice = 0;

        function start() {
            audio.play();
            console.log(palabras)
            document.addEventListener('keydown', function(event) {
                if (event.key === 'Enter') {
                    if (indice <= palabras.lenght){
                        let tiempoActual = audio.currentTime;
                            tiempos.push({
                        palabra: palabras[indice].textContent,
                        tiempo: tiempoActual
                    });
                    palabras[indice].style.color = 'red'; // Marca la palabra sincronizada
                    indice++;
                    console.log(tiempos)
                } else {

                }
            }
            });

        }
    </script>
</body>
</html>
